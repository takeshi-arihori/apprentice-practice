スタイルガイドに則ってクエリを書ける
スタイルガイドとは共通のコードの書き方の書式・ルールについてまとめたものです。スタイルガイドに従うことで読みやすい SQL クエリを書くことができます。

1. スタイルガイド
   SQL スタイルガイドを一通り読んでください。文章が読みづらい場合は SQL クエリの箇所だけ見て、SQL クエリの書式を把握してください。

2. スタイルガイドに則る
   今後 SQL クエリを書く際はスタイルガイドに則って書いてください。

## About Style Guide

- SQL スタイルガイドは、SQL コードを書く際のベストプラクティスやコーディング規約を提供するものです。チームや組織が一貫したコーディングスタイルを維持することで、可読性、保守性、コードの品質が向上します。以下は、一般的な SQL スタイルガイドのいくつかの主要な要素です。

- キーワードの大文字・小文字
  SQL キーワード（SELECT、FROM、WHERE など）は、大文字で書くことが一般的です。これにより、キーワードとカラム名やテーブル名が区別しやすくなります。

- インデント
  適切なインデントを使用して、クエリの構造を明確に示します。一般的には、新しい節（FROM、WHERE、GROUP BY など）の開始時にインデントを増やし、節が終わるとインデントを減らします。

- エイリアス
  テーブル名やカラム名に短くてわかりやすいエイリアスを使用して、クエリの可読性を向上させます。ただし、エイリアスは短すぎず、意味が理解できるようにすることが重要です。

- 行 1 ステートメント
  1 行に 1 つのステートメント（例：SELECT、FROM、WHERE など）を記述して、クエリの見た目を整理し、可読性を向上させます。

- 適切な改行
  長いクエリや複数のステートメントが含まれるクエリの場合、適切な改行を使用して、コードを読みやすくします。例えば、SELECT 句のカラムを改行してリスト化したり、JOIN や WHERE 句の条件を改行してリスト化するなどです。

- コメント
  適切なコメントを使用して、クエリの目的や動作を説明します。特に、複雑なクエリや非自明な操作については、コメントが重要です。

- 短い行
  行が長すぎる場合は、適切な位置で改行して、行を短くし、可読性を向上させます。

- 適切なカラム順序
  SELECT 句でカラムを取得する際には、テーブルの構造や業務上の意味を持つカラム順序を使用します。

- ワイルドカードの制限
  SELECT 句でワイルドカード（*）を使用するのではなく、必要なカラム名を明示的に指定して取得しましょう。ワイルドカード（*）を使用すると、テーブルのすべてのカラムが取得されますが、これにはいくつかのデメリットがあります。

- 結合条件の整理
  結合条件は ON 句にまとめて記述し、見やすくします。WHERE 句に結合条件を書かず、結合の目的と条件が明確になるようにします。

- カラムの選択と並び順
  SELECT 句では、必要なカラムを選択し、並べ替えの基準となるカラムは最初に記述します。その後、関連性のあるカラムや業務上の意味を持つカラム順に記述していきます。

- カラム名の省略を避ける
  カラム名は省略せず、フルネームで記述することが望ましいです。ただし、エイリアスを使う場合は、短くても意味が理解できる名前を使用します。

- SQL コードの整形
  SQL コードは、整形ツールを使用してコードを整形し、組織内での一貫性を保ちます。整形ツールには、オンラインの SQL 整形サイトや、エディタのプラグインがあります。

- クエリの最適化
  パフォーマンスを向上させるために、クエリの最適化を行います。例えば、必要のないカラムを取得しない、適切なインデックスを使用する、サブクエリを使いすぎないなどです。

- セミコロンで終わる
  SQL 文はセミコロン（;）で終わらせることが推奨されています。これにより、複数のクエリを一度に実行する場合や、SQL 文の終わりが明確になります。

これらのガイドラインは、コードの可読性、保守性、品質を向上させることを目的としています。
