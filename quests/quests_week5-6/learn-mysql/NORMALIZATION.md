## データベースを正規化できる

エンティティを定義した EC サイトの仕様をベースとして進みます。


#[ECサイトの例
]```
1. ユーザー
2. 商品
3. 購入履歴
4. カテゴリー
```


1. 第一正規形
ECサイトを、第一正規形になるようテーブル設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

その際に、下記のポイントを抑えるようにしてください。

アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
テーブルごとにプライマリーキーが設定されていること
1つのセルに1つの値のみが含まれること
以下、回答例です。

[ユーザーテーブル]

ID
名前
プライマリーキー：ID

------------------------------ Answer --------------------------------

第一正規形（1NF）: データが正規化され、各セルには単一の値のみが含まれ、同一テーブル内で重複した行がないことを保証します。

各セルには単一の値しか持たず、各行がユニークであることを確認します。

[ユーザーテーブル]
ユーザーID（主キー）
ユーザー名

[商品テーブル]
商品ID（主キー）
商品名
カテゴリー
価格

[購入履歴テーブル]
購入ID（主キー）
ユーザーID
商品ID
購入日

----------------------------------------------------------------------



2. 第二正規形
ECサイトの第一正規形の設計を、第二正規形になるようテーブル設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

その際に、下記のポイントを抑えるようにしてください。

アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
部分的関数従属性がないこと



------------------------------ Answer --------------------------------

第二正規形 (2NF)
全ての非キー列が主キー全体に関数的に依存していることを確認します。

[ユーザーテーブル]
ユーザーID（主キー）
ユーザー名

[商品テーブル]
商品ID（主キー）
商品名
カテゴリー
価格

[購入履歴テーブル]
購入ID（主キー）
ユーザーID
商品ID
購入日

-----------------------------------------------------------------------


3. 第三正規形
ECサイトの第二正規形の設計を、第三正規形になるようテーブル設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。

なお今回は、要件として「カテゴリーIDをキーとして、カテゴリーごとに商品を検索できる」が追加されたとします。

その際に、下記のポイントを抑えるようにしてください。

アプリケーションとして成立すること（プログラムを組んだ際に仕様を満たして動作すること）
推移的関数従属性がないこと



------------------------------ Answer --------------------------------
第三正規形 (3NF)
非キー列が他の非キー列に依存しないことを確認します。

[ユーザーテーブル]
ユーザーID（主キー）
ユーザー名

[商品テーブル]
商品ID（主キー）
商品名
カテゴリーID

[購入履歴テーブル]
購入ID（主キー）
ユーザーID
商品ID
購入日

[カテゴリーテーブ]ル
カテゴリーID（主キー）
カテゴリー名


-----------------------------------------------------------------------


4. ボイスコッド正規形
病院の管理システムのデータベースを設計してください。

要件は次の通りです。

患者と診療科が決まると担当医師も決まる(担当医師は一人のみ)
一人の医師は一つの診療科を担当する
一人の患者は複数の診療科を受診することがある
現在、次のテーブルが作成されています。

[担当医師テーブル]

患者
診療科
担当医師
プライマリーキー：患者,診療科

このテーブルはボイスコッド正規形になっていません。

このテーブルがボイスコッド正規形になるよう設計してください。テーブル名と、テーブルに紐づくカラム名とプライマリーキーを記載してください。なお、テーブル名とカラム名は日本語で大丈夫です。


-----------------------------------------------------------------------

患者テーブル

患者ID（主キー）
患者名
診療科テーブル

診療科ID（主キー）
診療科名
医師テーブル

医師ID（主キー）
医師名
診療科ID
診療記録テーブル

診療記録ID（主キー）
患者ID
医師ID
診療日

この設計では、診療科が決まれば医師が決まるという関係を満たすとともに、患者が複数の診療科を受診できるという要件も満たしています。
また、診療記録テーブルでは、ある患者がある日にどの医師から診療を受けたかという情報を保存できます。

-----------------------------------------------------------------------